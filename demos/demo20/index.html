<!--[if IE ]><![endif]-->
<!DOCTYPE html>
<!-- <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> -->
<!--[if lt IE 7 ]> <html class="no-js ie6 oldie lang_de" lang="de"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7 oldie lang_de" lang="de"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8 oldie lang_de" lang="de"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html class="no-js compliant lang_de" lang="de"> <!--<![endif]-->
	<head>

<!-- 

                   . .                  
                 .$7778...+=..      .   
   .          .,III77777777777..   .    
     ..    ..7II++I777777777777$..      
       ,   .IIII7II777777877777I7:.     
           .IIIIIII777777777777777.     
       .DIIIIIIIIII77777777777777D.     
    ...I?IIII?IIIII77777777777777$$D..  
 ...IIIIIIIIIIII7ID77777777777777$$$Z.  
 .IIIIII?IIIIIIIIII7777I777777777$$$$D  
 ?IIZDDI8$$IIIIIIII777?7777777777$$$$$. 
 .IIIII$$I7$$8I$8II$$O7IIZ7777777$$D$8  
 ZI?III?$+DOD8O8ZO7ZZZZ7Z?7I777$787$8.  
 .?IIIIII?OZZD88$$$$$$7I77777??$8$7:    
 ...IIIIIIIII .$D$$$DO77777777777$?.    
    ~II???II.   .$$$Z$$Z7O77DD77.       
      .:Z+.    .$$$$ZD......877Z        
           .   .D8$$ZD      .           
                .8O$$D                  
       .       .D$$$ZD         .        
               .$$$$$$.                 
              D$$$$$$$O$.               
   .        .$$?...$$8$..$Z~          

                                                                  __ /\_ \     
  ___ ___      __     _ __    __      ___          __    ___ ___ /\_\\//\ \    
/' __` __`\  /'__`\  /\`'__\/'__`\  /' _ `\      /'__`\/' __` __`\/\ \ \ \ \   
/\ \/\ \/\ \/\ \L\.\_\ \ \//\ \L\.\_/\ \/\ \    /\  __//\ \/\ \/\ \ \ \ \_\ \_ 
\ \_\ \_\ \_\ \__/.\_\\ \_\\ \__/.\_\ \_\ \_\   \ \____\ \_\ \_\ \_\ \_\/\____\
 \/_/\/_/\/_/\/__/\/_/ \/_/ \/__/\/_/\/_/\/_/    \/____/\/_/\/_/\/_/\/_/\/____/
                                                                               

 _     _             _ ____                              _                      _       
| |__ | |_ _ __ ___ | | ___|    _____  ___ __   ___ _ __(_)_ __ ___   ___ _ __ | |_ ___ 
| '_ \| __| '_ ` _ \| |___ \   / _ \ \/ / '_ \ / _ \ '__| | '_ ` _ \ / _ \ '_ \| __/ __|
| | | | |_| | | | | | |___) | |  __/>  <| |_) |  __/ |  | | | | | | |  __/ | | | |_\__ \
|_| |_|\__|_| |_| |_|_|____/   \___/_/\_\ .__/ \___|_|  |_|_| |_| |_|\___|_| |_|\__|___/
                                        |_|                                             
                                                                               
...........................................................

Ascii Generator - http://www.network-science.de/ascii/

Font: larry3d  
Font: ogre
Font: rectangles 
Font: rounded 
Font: shadow 
Font: slant
Font: small  
Font: smslant
Font: standard 
Font: stop

...........................................................

GlassGiant.com 
http://www.glassgiant.com/ascii/

...........................................................

-->
		<title> Example of 3D Square Chart using Three.Js and jQuery by Emil Maran / jQuery / Three.js </title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<meta charset="utf-8">  
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame Remove this if you use the .htaccess -->

		<meta name="generator" content="editplus" />
		<meta name="author" content="" />
		<meta name="keywords" content="" />
		<meta name="description" content="" />

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		
		<style>
			body {
				font-family: Monospace;
				background-color: #202020;
				margin: 0px;
				overflow-x: hidden;
			}
		</style>
	</head>
	<body>


	<!-- 
	
	http://www.iconarchive.com/show/fruit-vegetables-icons-by-bingxueling/melon-icon.html
	http://www.iconarchive.com/show/fruit-vegetables-icons-by-bingxueling/orange-icon.html
	http://www.iconarchive.com/show/fruit-vegetables-icons-by-bingxueling/apple-red-icon.html
	http://www.iconarchive.com/show/paradise-fruits-icons-by-artbees/Pear-icon.html

	https://www.iconfinder.com/free_icons
	-->

		<div id="info"><a href="http://github.com/mrdoob/three.js" target="_blank">three.js</a>  demo</div>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script src="js/Three.js"></script>
		<script src="js/RequestAnimationFrame.js"></script>
		<script src="js/Stats.js"></script>
		<!-- <script type="text/javascript" src="js/ThreeCanvas.js"></script> -->
		<script type="text/javascript" src="js/Cube.js"></script>
		<script type="text/javascript" src="js/Plane.js"></script>
		<script type="text/javascript" src="js/Tween.js"></script>

		<script>

			var container, stats;
			var bgRender = '0x999999';

			var camera, scene, renderer, objects;
			var particleLight, pointLight;

			var container, interval, camera, scene, renderer;
			var projector, plane, cube, linesMaterial;

			var color = 0,colors = [ 0xDF1F1F, 0xDFAF1F, 0x80DF1F, 0x1FDF50, 0x1FDFDF, 0x1F4FDF, 0x7F1FDF, 0xDF1FAF, 0xEFEFEF, 0x303030 ];
			var brush, objectHovered, mouse3D, isMouseDown = false;
			var radious = 1600, theta = 45, onMouseDownTheta = 45, phi = 60, onMouseDownPhi = 60, isShiftDown = false;

			var onMouseDownPosition = new Object;
			var ray = new Object;

			var texture_placeholder,
			isUserInteracting = false,
			onMouseDownMouseX = 0, onMouseDownMouseY = 0,
			lon = 90, onMouseDownLon = 0,
			lat = 0, onMouseDownLat = 0,
			phi = 0, theta = 0,
			target = new THREE.Vector3();

			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;

			var colorSq = "C00000";
			var JsonSqProcData = {
				0:{ name: "apple",  color: "C00000",  proccent: 5  ,to: 5   },
				1:{ name: "melon",  color: "6B952F",  proccent: 20 ,to: 25  },
				2:{ name: "pear",   color: "FDF100",  proccent: 35 ,to: 60  },
				3:{ name: "orange", color: "FF7F00",  proccent: 40 ,to: 100 } 
			}

			init();
			animate();

			//TWEEN.start();
			////////////////////////////////////////////////////////////////////////
			//
			// INIT
			//
			////////////////////////////////////////////////////////////////////////

			function init() {

				// ------------------------------------------------
				// define canvas element in DOM
				// ------------------------------------------------
				container = document.createElement('div');
				document.body.appendChild(container);

				// ------------------------------------------------
				// define info element in DOM
				// ------------------------------------------------
				var info = document.createElement('div');
				info.style.position = 'absolute';
				info.style.top = '10px';
				info.style.background = '#fff';
				info.style.color = '#333';
				info.style.width = '100%';
				info.style.textAlign = 'center';
				info.setAttribute.id = 'info';
				info.innerHTML = '<a href="http://github.com/mrdoob/three.js" target="_blank">three.js</a> Example of 3D Square Chart using Three.Js and jQuery by emil maran / camera pos: <span id="campos"></span>';
				container.appendChild(info);

				// ------------------------------------------------
				// left menu element in DOM
				// ------------------------------------------------
				var leftmenu = document.createElement('div');
				leftmenu.style.position = 'absolute';
				leftmenu.style.top = '0px';
				leftmenu.style.left = '80%';
				leftmenu.style.background = '#fff';
				leftmenu.style.color = '#333';
				leftmenu.style.width = '240px';
				leftmenu.style.height = '100%';
				leftmenu.style.padding = '20px';
				leftmenu.style.textAlign = 'left';
				leftmenu.setAttribute.id = 'leftmenu';

				var textLeftBar = '';
				
				textLeftBar+= '<h1>3D bar chart</h1><br />';
				textLeftBar+= 'Example of 3D Square Chart using Three.Js and jQuery <br /><br /><br />';
	
				textLeftBar+= '<table><tr>';
				textLeftBar+= '<td width="250"><img src="img/apple-red-icon.png" width="69"><h2 style="color:#C00000">5%</h2></td>';
				textLeftBar+= '<td width="250"><img src="img/melon-icon.png" width="69"><h2 style="color:#6B952F">20%</h2></td>';
				textLeftBar+= '</tr><tr>';
				textLeftBar+= '<td width="250"><img src="img/Pear-icon.png" width="69"><h2 style="color:#FDF100">35%</h2></td>';
				textLeftBar+= '<td width="250"><img src="img/orange-icon.png" width="69"><h2 style="color:#FF7F00">40%</h2></td>';
				textLeftBar+= '</tr></table>';
				textLeftBar+= '';
				
				leftmenu.innerHTML = textLeftBar;
				container.appendChild(leftmenu);

				// ------------------------------------------------
				// Set Camera View & Scene
				// ------------------------------------------------
				camera = new THREE.PerspectiveCamera( 65, window.innerWidth / window.innerHeight, 1, 4400 );
				camera.position.x = 600;
				camera.position.y = 500;
				camera.position.z = 300;
				//camera.rotation.x = 300;
				scene = new THREE.Scene();

				// ------------------------------------------------
				// Lights
				// ------------------------------------------------

				var directionalLight = new THREE.DirectionalLight( Math.random() * 0x444444 );
				directionalLight.position.x = Math.random() - 0.6;
				directionalLight.position.y = Math.random() - 0.6;
				directionalLight.position.z = Math.random() - 0.3;
				directionalLight.position.normalize();
				scene.add( directionalLight );

				// add subtle ambient lighting
				var lightSecond = new THREE.SpotLight( 0x666666, 1 );
				lightSecond.position.set( 690, 430, -160 );
				scene.add(lightSecond);

				// Add the lights
				var light = new THREE.PointLight( 0xffffff, .9 );
				light.position.set( 911, 110, 10 );
				scene.add( light );

				ambientLight = new THREE.AmbientLight( 0x444444 );
				scene.add( ambientLight );

				// ------------------------------------------------
				// Squares
				// ------------------------------------------------

				/*
				var materials = [

					new THREE.MeshBasicMaterial( { color: 0x00ffff, wireframe: true, side: THREE.DoubleSide } ),
					new THREE.MeshBasicMaterial( { color: 0xff0000, blending: THREE.AdditiveBlending, side: THREE.DoubleSide } ),
					new THREE.MeshLambertMaterial( { color: 0xffffff, shading: THREE.FlatShading, side: THREE.DoubleSide, overdraw: true } ),
					new THREE.MeshLambertMaterial( { color: 0xffffff, shading: THREE.SmoothShading, overdraw: true } ),
					new THREE.MeshDepthMaterial( { overdraw: true } ),
					new THREE.MeshNormalMaterial( { overdraw: true } ),
					new THREE.MeshNormalMaterial( { shading: THREE.SmoothShading, overdraw: true } ),
					new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'textures/land_ocean_ice_cloud_2048.jpg' ) } ),
					new THREE.MeshBasicMaterial( { envMap: THREE.ImageUtils.loadTexture( 'textures/envmap.png', new THREE.SphericalReflectionMapping() ) } )

				];
				*/

				var materials = [
					{ material: 
						//new THREE.MeshLambertMaterial( { color: 0xffffff, shading: THREE.FlatShading, overdraw: true } ), 
						new THREE.MeshBasicMaterial( {blending: THREE.AdditiveBlending, side: THREE.DoubleSide } ),
					doubleSided: true }
				];

				var cIndex = 0;
				var cZCube = 40; 
				for ( var j = 1; j <= 10; j ++ ) {
					for ( var i = 1; i <= 10; i ++ ) {

						
						$.each(JsonSqProcData, function(ik,item){
							if( cIndex < parseInt(JsonSqProcData[ik]["to"])  ){
								colorSq = JsonSqProcData[ik]["color"];
								cZCube  = JsonSqProcData[ik]["proccent"];
								return false;
							}
						});

						var cube = new THREE.Mesh(
							new THREE.CubeGeometry(40,(cZCube)+40,40),
							new THREE.MeshBasicMaterial( { 
								color: String("0x"+colorSq),
								overdraw: true,
								wireframe: false
							})
						);

						cube.position.y = - 95;
						cube.position.z = ( j * 95 ) - 500;
						cube.position.x = ( i * 95 ) - 500;
					
						cube.doubleSided = materials[0].doubleSided;
						scene.add(cube);

						cIndex++;

					}
				}
				
					// ------------------------------------------------
					// Define Grid 2 Define Material - Floor surface
					// ------------------------------------------------
					var geometry = new THREE.Geometry();
					geometry.vertices.push( new THREE.Vertex( new THREE.Vector3( - 500, 0, 0 ) ) );
					geometry.vertices.push( new THREE.Vertex( new THREE.Vector3( 500, 0, 0 ) ) );

					var material = new THREE.LineBasicMaterial( { color: 0xffffff, opacity: 0.4 } ); // 0xffffff

					for ( var i = 0; i <= 10; i ++ ) {

						var line = new THREE.Line( geometry, material );
						line.position.y = - 220;
						line.position.z = ( i * 100 ) - 500;
						scene.add( line );

						var line = new THREE.Line( geometry, material );
						line.position.x = ( i * 100 ) - 500;
						line.position.y = - 220;
						line.rotation.y = 90 * Math.PI / 180;
						scene.add( line );

					}

					// ------------------------------------------------
					// Panorama landscape
					// ------------------------------------------------
				
					var materials = [
						loadTexture( 'textures/cube/skybox/nx.jpg' ), // right
						loadTexture( 'textures/cube/skybox/nx.jpg' ), // left
						loadTexture( 'textures/cube/skybox/nx.jpg' ), // top
						loadTexture( 'textures/cube/skybox/nx.jpg' ), // bottom
						loadTexture( 'textures/cube/skybox/nx.jpg' ), // back
						loadTexture( 'textures/cube/skybox/nx.jpg' )  // front
					];

					//mesh = new THREE.Mesh( new THREE.CubeGeometry( 2700, 2700, 2700, 2, 3, 6, materials ), new THREE.MeshFaceMaterial({overdraw: true}) );
					mesh = new THREE.Mesh( new THREE.CubeGeometry( 2900, 2900, 2900, 2, 2, 2, materials ), new THREE.MeshDepthMaterial({overdraw: true}) );
					mesh.scale.x = -1;
					scene.add( mesh );

					// ------------------------------------------------
					// renderer 
					// ------------------------------------------------
					renderer = new THREE.CanvasRenderer();
					renderer.setSize( window.innerWidth, window.innerHeight );
					container.appendChild( renderer.domElement );

					// ------------------------------------------------
					// debugCanvas
					// ------------------------------------------------

					var debugCanvas = document.createElement( 'canvas' );
					debugCanvas.width = 512;
					debugCanvas.height = 512;
					debugCanvas.style.position = 'absolute';
					debugCanvas.style.top = '0px';
					debugCanvas.style.left = '0px';
					debugCanvas.setAttribute.id = 'debugCanvas';
					container.appendChild( debugCanvas );

					debugContext = debugCanvas.getContext( '2d' );
					debugContext.setTransform( 1, 0, 0, 1, 256, 256 );
					debugContext.strokeStyle = '#000000';

					stats = new Stats();
					stats.domElement.style.position = 'absolute';
					stats.domElement.style.top = '0px';
					container.appendChild(stats.domElement);

					document.addEventListener( 'mousemove', onDocumentMouseMove, false );

					// ------------------------------------------------
					// debugCanvas
					// ------------------------------------------------

					var nfoCanvas = document.createElement( 'canvas' );

					nfoCanvas.width = 512;
					nfoCanvas.height = 512;
					nfoCanvas.style.position = 'absolute';
					nfoCanvas.style.top = '220px';
					nfoCanvas.style.left = '220px';
					nfoCanvas.setAttribute.id = 'nfoCanvas';
					container.appendChild( nfoCanvas );

					nfoContext = nfoCanvas.getContext( '2d' );
					nfoContext.setTransform( 1, 0, 0, 1, 256, 256 );
					nfoContext.strokeStyle = '#000000';

			}


			function loadTexture( path ) {

				var texture = new THREE.Texture( texture_placeholder );
				var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: true } );

				var image = new Image();
				image.onload = function () {
					texture.needsUpdate = true;
					material.map.image = this;
					render();
				};
				image.src = path;
				return material;

			}

			////////////////////////////////////////////////////////////////////////
			//
			// RENDER
			//
			////////////////////////////////////////////////////////////////////////

			function render() {

				var timer = new Date().getTime() * 0.001;

				camera.position.x = Math.cos( timer ) * 500;
				camera.position.z = Math.sin( timer ) * 600;
				
				camera.lookAt( scene.position );

				for ( var i = 0, l = objects.length; i < l; i++ ) {
					var object = objects[ i ];
					object.rotation.x += 0.01;
					object.rotation.y += 0.005;
				}

				renderer.render( scene, camera );
				//renderer.setSize(windowHalfX, windowHalfY);
				renderer.setClearColorHex( bgRender, 0.9 );
				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			////////////////////////////////////////////////////////////////////////
			//
			// ONDOCUMENTMOUSEMOVE
			//
			////////////////////////////////////////////////////////////////////////

			function onDocumentMouseMove( event ) {

				//event.preventDefault();
				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;

				var timer = new Date().getTime() * 0.0001;

				//camera.position.x = Math.cos( timer ) * 1000;
				camera.position.z = Math.sin( timer ) * 1000;

				camera.position.x = mouseX+550;
				//camera.position.z = mouseY+750;
				camera.position.y = mouseY+550;
				camera.rotation.z = mouseY+150;
				camera.lookAt( scene.position );

				//console.log(camera.position.x+'..'+camera.position.y)

				renderer.render( scene, camera );
				renderer.setClearColorHex( bgRender, 0.9 );
				stats.update();

				//console.log(camera.position.x+'...'+camera.position.y+'...'+camera.position.z)
				document.getElementById('campos').innerHTML = camera.position.x+'...'+camera.position.y+'...'+camera.position.z;

			}


			////////////////////////////////////////////////////////////////////////
			//
			// LOADIMAGE
			//
			////////////////////////////////////////////////////////////////////////

			function loadImage( path ) {
				var image = document.createElement( 'img' );
				var texture = new THREE.Texture( image, THREE.UVMapping )
				image.onload = function () { texture.needsUpdate = true; };
				image.src = path;
				return texture;
			}

			////////////////////////////////////////////////////////////////////////
			//
			// ANIMATE
			//
			////////////////////////////////////////////////////////////////////////

			function animate() {
				requestAnimationFrame( animate );
				//render();
				//stats.update();
			}

		//////////////////////////////////////////////////

			function onDocumentKeyDown( event ) {

				/*switch( event.keyCode ) {

					case 49: setBrushColor( 0 ); break;
					case 50: setBrushColor( 1 ); break;
					case 51: setBrushColor( 2 ); break;
					case 52: setBrushColor( 3 ); break;
					case 53: setBrushColor( 4 ); break;
					case 54: setBrushColor( 5 ); break;
					case 55: setBrushColor( 6 ); break;
					case 56: setBrushColor( 7 ); break;
					case 57: setBrushColor( 8 ); break;
					case 48: setBrushColor( 9 ); break;

					case 16: isShiftDown = true; interact(); render(); break;

					case 37: offsetScene( - 1, 0 ); break;
					case 38: offsetScene( 0, - 1 ); break;
					case 39: offsetScene( 1, 0 ); break;
					case 40: offsetScene( 0, 1 ); break;

				}*/

			}


			function onDocumentKeyUp( event ) {
				switch( event.keyCode ) {
					case 16: isShiftDown = false; interact(); render(); break;
				}
			}


			function onDocumentMouseDown( event ) {
					event.preventDefault();
					isMouseDown = true;
					onMouseDownTheta = theta;
					onMouseDownPhi = phi;
					onMouseDownPosition.x = event.clientX;
					onMouseDownPosition.y = event.clientY;
			}

			function render() {
				renderer.render( scene, camera );
			}
			
		</script>
		
			<div>
				<canvas height="1410" width="1920" id="canvasbox"></canvas>
				<!-- <canvas style="position: absolute; top: 0px; left: 0px;" height="512" width="1512"></canvas> -->
			</div>

	

</body></html>